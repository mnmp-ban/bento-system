<!DOCTYPE html>
<html lang="ja">
<head><meta charset="UTF-8"><title>æ³¨æ–‡ç”»é¢</title></head>
<body>
  <h1>ğŸ± ãŠå¼å½“æ³¨æ–‡</h1>
  <div id="userName"></div>
  <p>æ³¨æ–‡å†…å®¹ã‚’é¸ã‚“ã§ãã ã•ã„ï¼š</p>
  <select id="lunch">
    <option value="none">æ³¨æ–‡ã—ãªã„</option>
    <option value="normal">é€šå¸¸</option>
    <option value="large">å¤§ç››ã‚Š</option>
    <option value="mannan">ãƒãƒ³ãƒŠãƒ³</option>
    <option value="noodle">éººé¡</option>
  </select><br/><br/>
  <button onclick="submitOrder()">æ³¨æ–‡ã™ã‚‹</button>
  <h3>å±¥æ­´</h3>
  <ul id="historyList"></ul>
  <script>
    const name = new URLSearchParams(location.search).get("name") || "æœªè¨­å®š";
    document.getElementById('userName').textContent = `ã“ã‚“ã«ã¡ã¯ã€${name} ã•ã‚“`;

    const key = "orders_" + name;
    const history = JSON.parse(localStorage.getItem(key) || "[]");
    const list = document.getElementById('historyList');
    history.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item;
      list.appendChild(li);
    });

    function submitOrder() {
      const o = document.getElementById('lunch').value;
      const now = new Date().toISOString().split("T")[0];
      const entry = `${now}: ${o}`;
      history.push(entry);
      localStorage.setItem(key, JSON.stringify(history));
      const li = document.createElement("li");
      li.textContent = entry;
      list.appendChild(li);
      alert("æ³¨æ–‡ã‚’ç™»éŒ²ã—ã¾ã—ãŸ");
    }
  </script>
</body>
</html>
